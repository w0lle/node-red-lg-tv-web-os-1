<script type="text/javascript">
    RED.nodes.registerType('lg-tv',{
        category: 'config',
        defaults: {
            host: {value:"",required:true},
            code: {value:"",required:true}
        },
        label: function() {
            return this.host+":"+this.code;
        },
        oneditprepare() {
            var that = this;
        $('#lgtv-connect').button().click(() => {
            $.getJSON(`/lgtv-connect-2?host=${$("#node-config-input-host").val()}`);
        });

        $('#lgtv-pair').button().click(() => {
            $.getJSON(`/lgtv-pair-2?host=${$("#node-config-input-host").val()}&code=${$("#node-config-input-code").val()}`);
        });
        
    
    }
    
    
    });
</script>

<script type="text/html" data-template-name="lg-tv">
    <div class="form-row">
        <label for="node-config-input-host"><i class="fa fa-bookmark"></i> Host</label>
        <input type="text" id="node-config-input-host">
    </div>

    <div class="form-row">
        <button id="lgtv-connect" type="button" class="red-ui-button">Connect</button>
    </div>
    <div class="form-row">
        <label for="node-config-input-code"><i class="fa fa-bookmark"></i> Code</label>
        <input type="text" id="node-config-input-code">
    </div>

    <div class="form-row">
        <button id="lgtv-pair" type="button" class="red-ui-button">Pair</button>
    </div>
</script>